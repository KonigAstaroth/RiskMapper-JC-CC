{% extends "allTemplate.html" %}
{% load static %}

{% block titulo %}
Carga de datos
{% endblock %}

{% block contenido %}

{% if success %}
    <div class="alert alert-success" style="width: 50%; text-align: center; z-index: 999; position: fixed; top: 0; left: 25%;" id="success-alert" role="alert">
        {{ success }}
        <script>
            setTimeout(function() {
                var successbox = document.getElementById("success-alert");
                if (successbox) {
                    successbox.style.transition = "opacity 0.75s";
                    successbox.style.opacity = "0";
                    setTimeout(() => successbox.remove(), 500); 
                }
            }, 3000); 
        </script>
    </div>
{% endif %}

{% if error %}
    <div class="alert alert-danger" style="width: 50%; text-align: center ; z-index: 999; position: fixed; top: 0; left: 25%;" id="error-alert" role="alert">
        {{ error }}
        <script>
            setTimeout(function() {
                var alertBox = document.getElementById("error-alert");
                if (alertBox) {
                    alertBox.style.transition = "opacity 0.75s";
                    alertBox.style.opacity = "0";
                    setTimeout(() => alertBox.remove(), 500); 
                }
            }, 3000); 
        </script>
    </div>
{% endif %}



<h2 class="loadFilesTitle">Carga de datos</h2>
<hr class="separationthree">
<div class="loadData">
    <div class="loadFormu">
        <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
            <br>
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
                <h3>Detalles</h3>
                <button type="submit" class="send">Subir</button>
            </div>
            
            <hr class="separation">

            <div class="row" style="margin-top: 1%;">
                <div class="col">
                    <label class="labels">Tipo de evento</label>
                        <input type="text" class="form-control" id="evento" placeholder="Escriba un tipo de evento" name="evento" maxlength="30">
                </div>
                <div class="col">
                    <label class="labels">Tipo de delito</label>
                        <select class="form-select" name="crime" style="font-family: Inter, sans-serif;font-weight: 400; color: black;">
                            <option selected class="options">Selecciona un tipo de delito</option>
                            <option value="Homicidio doloso" class="options">Homicidio</option>
                            <option value="Feminicidio" class="options">Feminicidio</option>
                            <option value="Secuestro" class="options">Secuestro</option>
                            <option value="Trata de personas" class="options">Trata de personas</option>
                            <option value="Robo a transeúnte" class="options">Robo a transeúnte</option>
                            <option value="Robo a negocio" class="options">Robo a negocio</option>
                            <option value="Extorsión" class="options">Extorsión</option>
                            <option value="Robo de vehículo" class="options">Robo de vehículo</option>
                            <option value="Robo a casa habitación" class="options">Robo a casa habitación</option>
                            <option value="Violación" class="options">Violación</option>
                            <option value="Narcomenudeo" class="options">Narcomenudeo</option>
                            <option value="Amenazas" class="options">Amenazas</option>
                            <option value="DelitoBajoImpacto" class="options">Delito de bajo impacto</option>
                            <option value="DelitoBajoImpacto" class="options">Robo a transeunte</option>
                            
                        </select>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                     <label class="labels">Categoría</label>
                    <input type="text" class="form-control" id="categ" placeholder="Escriba la categoría" name="categ" maxlength="50">
                </div>
                <div class="col">
                     <label class="labels">Seleccione un icono</label>
                        <select class="form-select" name="crime" style="font-family: Inter, sans-serif;font-weight: 400; color: black;">
                            
                            <!----->
                            <option value="homicidio doloso" class="options">Homicidio doloso</option>
                            <option value="feminicidio" class="options">Feminicidio</option>
                            <option value="secuestro" class="options">Secuestro</option>
                            <option value="trata de personas" class="options">Trata de personas</option>
                            <option value="robo a transeunte" class="options">Robo a transeúnte</option>
                            <option value="robo a negocio" class="options">Robo a negocio</option>
                            <option value="extorsion" class="options">Extorsión</option>
                            <option value="robo de vehiculo" class="options">Robo de vehículo</option>
                            <option value="robo a casa habitacion" class="options">Robo a casa habitación</option>
                            <option value="violacion" class="options">Violación</option>
                            <option value="narcomenudeo" class="options">Narcomenudeo</option>
                            <option value="amenazas" class="options">Amenazas</option>
                            <option value="delito de bajo impacto" class="options">Delito de bajo impacto</option>
                            <option value="robovehiculo" class="options">Robo de vehiculo</option>
                        </select>
                </div>
               
            </div>
            
            <br>
            <div class="row" style="margin-top: 1%;">
                <div class="col">
                    <label class="labels">Fecha</label>
                    <input type="datetime-local" class="form-control" name="FechaHoraHecho">
                </div>
            </div>
            <br>
            <div class="row">
                <label class="labels">Dirección</label>
                <div class="col">
                    
                    <input type="text" class="form-control" id="calle" placeholder="Calle" name="calle">
                </div>
                
                <div class="col">
                    <input type="text" class="form-control" id="colonia" placeholder="Colonia" name="colonia">
                </div>
                
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <label class="labels">Municipio</label>
                    <input type="text" class="form-control" id="municipio" placeholder="Municipio" name="municipio">
                </div>
        
                <div class="col">
                    <label class="labels">Estado</label>
                    <input type="text" class="form-control" id="estado" placeholder="Estado" name="estado">
                </div>
            </div>
            <br>
            <div class="row">
                <label class="labels">Coordenadas</label>
                <div class="col">
                    <input type="text" class="form-control" id="lat" placeholder="Latitud" name="lat">
                </div>
                <div class="col">
                    <input type="text" class="form-control" id="lng" placeholder="Longitud" name="lng">
                </div>

            </div>
            <hr style="border-top: 2px dashed #C5C5C5;">
            <h5>Subir archivos por excel</h5>
            <br>
            <label for="archivo" class="uploadFile">
                <i class="bi bi-upload me-3"></i>Buscar archivo
            </label>
            <input type="file" id="archivo" name="archivo" requiered style="display: none;">
            <p id="nombreArchivo" style="margin-top: 10px; font-family: Inter, sans-serif;"></p>
            
        
            <script>
                const inputArchivo = document.getElementById('archivo');
                const nombreArchivo = document.getElementById('nombreArchivo');

                inputArchivo.addEventListener('change', function () {
                    if (this.files.length > 0) {
                        nombreArchivo.textContent = 'Archivo seleccionado: ' + this.files[0].name;
                    } else {
                        nombreArchivo.textContent = '';
                    }
                });
            </script>
        </form>
    </div>
</div>

{% endblock %}